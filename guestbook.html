---
layout: default
title: 留言板
permalink: /guestbook/
---

<div class="page-header">
    <div class="container">
        <h1><i class="fas fa-comments"></i> 留言板</h1>
        <p class="page-description">欢迎在这里留下您的宝贵意见和建议！</p>
    </div>
</div>

<div class="content-section">
    <div class="container">
        <div class="guestbook-intro">
            <div class="intro-card">
                <div class="intro-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <div class="intro-content">
                    <h3>感谢您的访问</h3>
                    <p>这里是我的数字留言板，您可以：</p>
                    <ul>
                        <li><i class="fas fa-check"></i> 分享您对网站的看法</li>
                        <li><i class="fas fa-check"></i> 提出改进建议</li>
                        <li><i class="fas fa-check"></i> 交流技术心得</li>
                        <li><i class="fas fa-check"></i> 或者只是简单地打个招呼</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 留言表单 -->
        <div class="guestbook-form-section">
            <h2>留下你的足迹</h2>
            <form id="guestbookForm" class="guestbook-form">
                <div class="form-group">
                    <label for="visitorName">昵称</label>
                    <input type="text" id="visitorName" name="name" required maxlength="50" placeholder="请输入你的昵称">
                </div>

                <div class="form-group">
                    <label for="visitorEmail">邮箱</label>
                    <input type="email" id="visitorEmail" name="email" required maxlength="100" placeholder="你的邮箱地址（不会公开）">
                </div>

                <div class="form-group">
                    <label for="visitorMessage">留言</label>
                    <textarea id="visitorMessage" name="message" required rows="5" maxlength="500" placeholder="说说你的想法..."></textarea>
                    <span class="char-count"><span id="charCount">0</span>/500</span>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> 提交留言
                    </button>
                    <span id="formStatus" class="form-status"></span>
                </div>
            </form>
        </div>

        <!-- 留言列表 -->
        <div class="guestbook-list-section">
            <h2>最新留言</h2>
            <div id="guestbookList" class="guestbook-list">
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <p>还没有留言，成为第一个留言的人吧！</p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.guestbook-intro {
    margin-bottom: 3rem;
}

.intro-card {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(124, 58, 237, 0.1));
    border: 1px solid rgba(0, 212, 255, 0.2);
    border-radius: 12px;
    padding: 2rem;
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
}

.intro-icon {
    font-size: 2rem;
    color: var(--primary-color, #00d4ff);
    flex-shrink: 0;
}

.intro-content h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.3rem;
}

.intro-content ul {
    list-style: none;
    padding: 0;
    margin: 1rem 0 0 0;
}

.intro-content li {
    padding: 0.5rem 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.intro-content i {
    color: var(--primary-color, #00d4ff);
}

/* 留言表单 */
.guestbook-form-section {
    background: var(--bg-secondary, rgba(255, 255, 255, 0.05));
    border: 1px solid var(--border-color, rgba(0, 212, 255, 0.2));
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 3rem;
}

.guestbook-form-section h2 {
    margin: 0 0 1.5rem 0;
    font-size: 1.3rem;
}

.guestbook-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group label {
    font-weight: 600;
    color: var(--text-primary, #fff);
}

.form-group input,
.form-group textarea {
    background: var(--bg-tertiary, rgba(0, 0, 0, 0.3));
    border: 1px solid var(--border-color, rgba(0, 212, 255, 0.2));
    color: var(--text-primary, #fff);
    padding: 0.75rem 1rem;
    border-radius: 6px;
    font-size: 1rem;
    font-family: inherit;
    outline: none;
    transition: border-color 0.3s;
}

.form-group input:focus,
.form-group textarea:focus {
    border-color: var(--primary-color, #00d4ff);
    background: var(--bg-tertiary, rgba(0, 212, 255, 0.05));
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: var(--text-secondary, #666);
}

.form-group textarea {
    resize: vertical;
    min-height: 120px;
}

.char-count {
    font-size: 0.85rem;
    color: var(--text-secondary, #999);
    text-align: right;
}

.form-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.form-status {
    font-size: 0.95rem;
    transition: all 0.3s;
}

.form-status.success {
    color: #51cf66;
}

.form-status.error {
    color: #ff6b6b;
}

/* 留言列表 */
.guestbook-list-section h2 {
    margin-bottom: 1.5rem;
    font-size: 1.3rem;
}

.guestbook-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.guestbook-item {
    background: var(--bg-secondary, rgba(255, 255, 255, 0.05));
    border: 1px solid var(--border-color, rgba(0, 212, 255, 0.2));
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s;
}

.guestbook-item:hover {
    background: var(--bg-secondary, rgba(255, 255, 255, 0.08));
    border-color: var(--primary-color, #00d4ff);
    box-shadow: 0 5px 20px rgba(0, 212, 255, 0.1);
}

.guestbook-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.guestbook-item-meta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.guestbook-item-name {
    font-weight: 600;
    color: var(--primary-color, #00d4ff);
    font-size: 1.05rem;
}

.guestbook-item-date {
    font-size: 0.85rem;
    color: var(--text-secondary, #999);
}

.guestbook-item-message {
    color: var(--text-primary, #fff);
    line-height: 1.6;
    word-wrap: break-word;
}

.empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-secondary, #999);
}

.empty-state i {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

@media (max-width: 768px) {
    .intro-card {
        flex-direction: column;
    }

    .guestbook-form-section {
        padding: 1rem;
    }

    .form-actions {
        flex-direction: column;
        align-items: stretch;
    }

    .form-actions button {
        width: 100%;
    }
}
</style>

<script>
class Guestbook {
    constructor() {
        this.messages = JSON.parse(localStorage.getItem('guestbookMessages')) || [];
        this.init();
    }

    init() {
        const form = document.getElementById('guestbookForm');
        form.addEventListener('submit', (e) => this.handleSubmit(e));

        const textarea = document.getElementById('visitorMessage');
        textarea.addEventListener('input', (e) => {
            document.getElementById('charCount').textContent = e.target.value.length;
        });

        this.renderMessages();
    }

    handleSubmit(e) {
        e.preventDefault();

        const name = document.getElementById('visitorName').value.trim();
        const email = document.getElementById('visitorEmail').value.trim();
        const message = document.getElementById('visitorMessage').value.trim();

        if (!name || !email || !message) {
            this.showStatus('请填写所有字段', 'error');
            return;
        }

        const newMessage = {
            id: Date.now().toString(),
            name: this.escapeHtml(name),
            email: this.escapeHtml(email),
            message: this.escapeHtml(message),
            timestamp: new Date().toISOString()
        };

        this.messages.unshift(newMessage);
        localStorage.setItem('guestbookMessages', JSON.stringify(this.messages));

        this.showStatus('留言已保存！', 'success');

        // 清空表单
        document.getElementById('guestbookForm').reset();
        document.getElementById('charCount').textContent = '0';

        // 重新渲染
        this.renderMessages();

        // 2秒后清除状态信息
        setTimeout(() => {
            document.getElementById('formStatus').textContent = '';
            document.getElementById('formStatus').className = 'form-status';
        }, 2000);
    }

    showStatus(message, type) {
        const statusEl = document.getElementById('formStatus');
        statusEl.textContent = message;
        statusEl.className = `form-status ${type}`;
    }

    renderMessages() {
        const listContainer = document.getElementById('guestbookList');

        if (this.messages.length === 0) {
            listContainer.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-comments"></i>
                    <p>还没有留言，成为第一个留言的人吧！</p>
                </div>
            `;
            return;
        }

        listContainer.innerHTML = this.messages.map(msg => `
            <div class="guestbook-item">
                <div class="guestbook-item-header">
                    <div class="guestbook-item-meta">
                        <div class="guestbook-item-name">${msg.name}</div>
                        <div class="guestbook-item-date">${this.formatDate(msg.timestamp)}</div>
                    </div>
                </div>
                <div class="guestbook-item-message">${msg.message.replace(/\n/g, '<br>')}</div>
            </div>
        `).join('');
    }

    formatDate(timestamp) {
        const date = new Date(timestamp);
        const now = new Date();
        const diffMs = now - date;
        const diffMins = Math.floor(diffMs / 60000);
        const diffHours = Math.floor(diffMs / 3600000);
        const diffDays = Math.floor(diffMs / 86400000);

        if (diffMins < 1) return '刚刚';
        if (diffMins < 60) return `${diffMins}分钟前`;
        if (diffHours < 24) return `${diffHours}小时前`;
        if (diffDays < 7) return `${diffDays}天前`;

        return date.toLocaleDateString('zh-CN');
    }

    escapeHtml(text) {
        const map = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#039;'
        };
        return text.replace(/[&<>"']/g, m => map[m]);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    new Guestbook();
});
</script>
